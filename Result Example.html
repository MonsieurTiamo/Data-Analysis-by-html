
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Moonback 数据报告</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
    <style>
        #main, #engagement { width: 100%; height: 600px; margin: 20px 0; }
        .header { text-align: center; margin: 20px 0; color: #666; }
    </style>
</head>
<body>
    <div class="header">
        <h3>Moonback 运营数据报告</h3>
        <p>数据生成时间：2025/2/24 17:29:45</p>
    </div>
    <div id="main"></div>
    <div id="engagement"></div>
    <script>
        // 嵌入原始数据
        const data = [{"日期":"0125","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/iINuKaqv5nk","Youtube曝光":"1074","Youtube点赞":"24","Youtube评论":"0","TK链接":"https://www.tiktok.com/@peanutneow12/video/7463706142284303662","TK曝光":"362","TK点赞":"23","TK评论":"0","Ins链接":"https://www.instagram.com/reel/DFPD0ZZxlTS/","Ins曝光":"113","Ins点赞":"1","Ins评论":"0"},{"日期":"0125","还需改进":"-","剪辑/好":"节奏快","Youtube链接":"https://www.youtube.com/shorts/z3h59SbFtI0","Youtube曝光":"443","Youtube点赞":"36","Youtube评论":"0","TK链接":"https://www.tiktok.com/@peanutneow12/video/7463385716874153247","TK曝光":"627","TK点赞":"69","TK评论":"1","Ins链接":"https://www.instagram.com/reel/DFM1hjlRyck/","Ins曝光":"82","Ins点赞":"0","Ins评论":"0"},{"日期":"0126","还需改进":"-","剪辑/好":"画面多","Youtube链接":"https://www.youtube.com/shorts/xcp72M8SXQA","Youtube曝光":"6869","Youtube点赞":"309","Youtube评论":"0","TK链接":"https://www.tiktok.com/@peanutneow12/video/7464046921900969247","TK曝光":"933","TK点赞":"79","TK评论":"0","Ins链接":"https://www.instagram.com/reel/DFRbM-NJHII/","Ins曝光":"119","Ins点赞":"5","Ins评论":"0"},{"日期":"0127","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/c6KzE6Vimk4","Youtube曝光":463,"Youtube点赞":19,"Youtube评论":"0","TK链接":"https://www.tiktok.com/@peanutneow12/video/7464428426447965482","TK曝光":529,"TK点赞":29,"TK评论":1,"Ins链接":"https://www.instagram.com/reel/DFUEbtJM-NL/","Ins曝光":126,"Ins点赞":2,"Ins评论":"0"},{"日期":"0128","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/rcTm27ekUDk","Youtube曝光":41,"Youtube点赞":0,"Youtube评论":"0","TK链接":"https://www.tiktok.com/@peanutneow12/video/7464794133568277803","TK曝光":921,"TK点赞":16,"TK评论":0,"Ins链接":"https://www.instagram.com/reel/DFWm95mpDnb/","Ins曝光":114,"Ins点赞":0,"Ins评论":"0"},{"日期":"0131","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/orz7xGa_zXo","Youtube曝光":60,"Youtube点赞":1,"Youtube评论":"0","TK链接":"https://www.tiktok.com/@peanutneow12/video/7465905236599639338","TK曝光":871,"TK点赞":60,"TK评论":0,"Ins链接":"https://www.instagram.com/reel/DFeUqsYphvC/","Ins曝光":139,"Ins点赞":8,"Ins评论":"0"},{"日期":"0201","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/7A1Bl6UWfrc","Youtube曝光":588,"Youtube点赞":17,"Youtube评论":"0","TK链接":"https://www.tiktok.com/@peanutneow12/video/7466275130298141983","TK曝光":236,"TK点赞":7,"TK评论":0,"Ins链接":"https://www.instagram.com/reel/DFg4x_yJLfk/","Ins曝光":112,"Ins点赞":0,"Ins评论":"0"},{"日期":"0202","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/g9vYL1Us6UU","Youtube曝光":51,"Youtube点赞":1,"Youtube评论":"0","TK链接":"https://www.tiktok.com/@peanutneow12/video/7466663186104831278","TK曝光":903,"TK点赞":52,"TK评论":0,"Ins链接":"https://www.instagram.com/reel/DFjlClfJR_4/","Ins曝光":150,"Ins点赞":2,"Ins评论":"0"},{"日期":"0205","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/X7scMEz_7Ag","Youtube曝光":1177,"Youtube点赞":10,"Youtube评论":"0","TK链接":"https://www.tiktok.com/@peanutneow12/video/7467766228367707438","TK曝光":967,"TK点赞":21,"TK评论":0,"Ins链接":"https://www.instagram.com/reel/DFrO3MzJ7WC/","Ins曝光":169,"Ins点赞":1,"Ins评论":"0"},{"日期":"0207","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/7EE-8nBqSMw","Youtube曝光":460,"Youtube点赞":16,"Youtube评论":"0","TK链接":"https://www.tiktok.com/@peanutneow12/video/7468514273443007774","TK曝光":78,"TK点赞":5,"TK评论":0,"Ins链接":"https://www.instagram.com/reel/DFwangXp6Nx/","Ins曝光":138,"Ins点赞":1,"Ins评论":"0"},{"日期":"0208","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/ETeHOyLiheg","Youtube曝光":1956,"Youtube点赞":33,"Youtube评论":0,"TK链接":"https://www.tiktok.com/@peanutneow12/video/7468877789639347486","TK曝光":952,"TK点赞":73,"TK评论":0,"Ins链接":"https://www.instagram.com/reel/DFy8c9yJ3Ac/","Ins曝光":151,"Ins点赞":"-","Ins评论":"-","__EMPTY":"铲旧猫砂"},{"日期":"0210","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/Z4gq7EhSKnw","Youtube曝光":461,"Youtube点赞":19,"Youtube评论":0,"TK链接":"https://www.tiktok.com/@peanutneow12/video/7469728013505088811","TK曝光":860,"TK点赞":52,"TK评论":0,"Ins链接":"https://www.instagram.com/reel/DF6nkFfpSPz/","Ins曝光":122,"Ins点赞":"-","Ins评论":"-"},{"日期":"0211","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/spW291ISCJk","Youtube曝光":64,"Youtube点赞":1,"Youtube评论":0,"TK链接":"https://www.tiktok.com/@peanutneow12/video/7469984125911338270","TK曝光":123,"TK点赞":6,"TK评论":0,"Ins链接":"https://www.instagram.com/reel/DF9JxIMpywb/","Ins曝光":232,"Ins点赞":"-","Ins评论":"-"},{"日期":"0212","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/tToU2D2lzxY","Youtube曝光":2028,"Youtube点赞":29,"Youtube评论":0,"TK链接":"https://www.tiktok.com/@peanutneow12/video/7470354444463525163","TK曝光":905,"TK点赞":55,"TK评论":0,"Ins链接":"https://www.instagram.com/reel/DF_uUDesx2J/","Ins曝光":366,"Ins点赞":"-","Ins评论":"-","__EMPTY":"一句话+节奏音乐"},{"日期":"0213","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/P-t37KaxtIY","Youtube曝光":31,"Youtube点赞":1,"Youtube评论":0,"TK链接":"https://www.tiktok.com/@peanutneow12/video/7470772431381171486","TK曝光":142,"TK点赞":9,"TK评论":0,"Ins链接":"https://www.instagram.com/p/DF_uUDesx2J/","Ins曝光":235,"Ins点赞":"-","Ins评论":"-"},{"日期":"0217","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/v4FuCCYyT0w","Youtube曝光":418,"Youtube点赞":18,"Youtube评论":0,"TK链接":"https://www.tiktok.com/@peanutneow12/video/7472583920412839210","TK曝光":850,"TK点赞":31,"TK评论":0,"Ins链接":"https://www.instagram.com/reel/DGMqOw4JXjy/","Ins曝光":122,"__EMPTY":"一句话+节奏音乐"},{"日期":"0219","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/e_veSOJHLKE","Youtube曝光":464,"Youtube点赞":18,"Youtube评论":0,"TK链接":"https://www.tiktok.com/@peanutneow12/video/7473325204949994798","TK曝光":123,"TK点赞":9,"TK评论":0,"Ins链接":"https://www.instagram.com/reel/DGRy3zeJnET/","Ins曝光":166},{"日期":"0220","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/t3FZFhIqGvU","Youtube曝光":629,"Youtube点赞":46,"Youtube评论":0,"TK链接":"https://www.tiktok.com/@peanutneow12/video/7473693991377095967","TK曝光":138,"TK点赞":10,"TK评论":0,"Ins链接":"https://www.instagram.com/reel/DGUWpXMpKWO/","Ins曝光":109},{"日期":"0221","还需改进":"/","剪辑/好":"/","Youtube链接":"https://www.youtube.com/shorts/iTJSLPsPN3w","Youtube曝光":1383,"Youtube点赞":60,"Youtube评论":0,"TK链接":"https://www.tiktok.com/@peanutneow12/video/7473782824839974174","TK曝光":955,"TK点赞":84,"TK评论":2,"Ins链接":"https://www.instagram.com/reel/DGUw7-oxAJx/","Ins曝光":524,"__EMPTY":"铲旧猫砂"}];

        // 嵌入渲染函数
        function renderCharts(data) {

            // 处理原始数据
            //const data = processData(data); // 新增数据处理步骤
    
            // 生成日期标签数组
            //const dates = data.map(item => item.displayDate); // 使用处理后的日期字段

            const youtubeUrls = data.map(item => item['Youtube链接']); 
            // 遍历 data 数组中的每一个对象，从每个对象中提取 'Youtube链接' 属性的值。将这些值组成一个新数组，并赋值给 youtubeUrls。
            const tkUrls = data.map(item => item['TK链接']);
            const insUrls = data.map(item => item['Ins链接']);
            const youtubeViews = data.map(item => item['Youtube曝光']);
            const tkViews = data.map(item => item['TK曝光']);
            const insViews = data.map(item => item['Ins曝光']);
            const youtubeLikes = data.map(item => item['Youtube点赞']);
            const tkLikes = data.map(item => item['TK点赞']);
            const insLikes = data.map(item => item['Ins点赞']);
            const youtubeComments = data.map(item => item['Youtube评论']);
            const tkComments = data.map(item => item['TK评论']);
            const insComments = data.map(item => item['Ins评论']);
            const dates = data.map(item => item['日期']); // 提取“日期”列

            const youtubeEngagement = youtubeLikes.map((like, index) => like + youtubeComments[index]);
            const tkEngagement = tkLikes.map((like, index) => like + tkComments[index]);
            const insEngagement = insLikes.map((like, index) => like + insComments[index]);

            // 绘制曝光量图表
            // 获取 HTML 中 ID 为 'main' 的元素，通常是用于显示图表的容器
            const chartDom = document.getElementById('main');

            // 使用 ECharts 库初始化该容器，创建一个新的图表实例
            const myChart = echarts.init(chartDom);

            const option1 = {
                title: {
                    text: '平台曝光趋势',
                    subtext: '可爱鬼，请你看数据，记得要天天开心！',
                    left: 'center'
                },
                tooltip: {
                                    trigger: 'axis', // 触发方式：'axis' 表示鼠标悬停时显示整个轴的数据点
                    formatter: function (params) {
                        // params 是一个数组，包含所有系列在当前数据点的信息
                        // 每个元素对应一个系列（如 YouTube、TikTok、Instagram）的数据

                        let tooltipContent = ''; // 初始化提示内容为空字符串

                        // 遍历 params 数组，处理每个系列的数据
                        params.forEach(param => {
                            const index = param.dataIndex; // 当前数据点的索引
                            const seriesName = param.seriesName; // 当前系列的名称（如 YouTube）
                            const value = param.value; // 当前系列在当前数据点的值

                            // 将系列名称和值添加到提示内容中
                            tooltipContent += `${seriesName}: ${value}<br/>`;
                        });

                        // 添加额外的提示信息，告诉用户可以点击数据点以访问视频
                        tooltipContent += '点击对应位置以访问视频';

                        // 返回最终的提示内容
                        return tooltipContent;
                    }
                },
                legend: {
                    data: ['YouTube', 'TikTok', 'Instagram'],
                    right: '10%',  // 从右侧的距离
                    top: '10%' 
                },
                xAxis: {
                        type: 'category',
                data: dates, // 使用处理后的日期数组
                axisLabel: {
                    rotate: 45, // 标签旋转
                    formatter: function (value) {
                        return value ; // 可选：添加"日"后缀 (显示为15日)
                    }
            }
                },
                yAxis: {
                    type: 'value'
                },
                series: [
                    {
                        name: 'YouTube',
                        type: 'line',
                        data: youtubeViews,
                        emphasis: {
                            focus: 'series'
                        }
                        //这个设置表示当用户将鼠标悬停在图表的某个数据点上时，整个系列（即与该数据点相关的所有数据点）会被高亮显示。
                    },
                    {
                        name: 'TikTok',
                        type: 'line',
                        data: tkViews,
                        emphasis: {
                            focus: 'series'
                        }
                    },
                    {
                        name: 'Instagram',
                        type: 'line',
                        data: insViews,
                        emphasis: {
                            focus: 'series'
                        }
                    }
                ]
            };

            myChart.setOption(option1);

            // 添加点击事件，直接跳转到视频
            myChart.on('click', function (params) {
                                // 获取当前数据点的索引
                    const index = params.dataIndex;

                // 获取当前系列的名称
                const seriesName = params.seriesName;

                // 根据系列名称获取对应的 URL
                let url = '';
                switch (seriesName) {
                    case 'YouTube':
                        url = youtubeUrls[index];
                        break;
                    case 'TikTok':
                        url = tkUrls[index];
                        break;
                    case 'Instagram':
                        url = insUrls[index];
                        break;
                }

                // 如果 URL 存在，则在新标签页中打开
                if (url) {
                    window.open(url, '_blank');
                } else {
                    console.warn('未找到对应的 URL:', { seriesName, index });
                }
            });

            // 绘制互动量图表
            const engagementDom = document.getElementById('engagement');
            const engagementChart = echarts.init(engagementDom);

            const option2 = {
                title: {
                    text: '平台互动量趋势',
                    left: 'center'
                },
                tooltip: {
                    trigger: 'axis', // 触发方式：'axis' 表示鼠标悬停时显示整个轴的数据点
                    formatter: function (params) {
                        // params 是一个数组，包含所有系列在当前数据点的信息
                        // 每个元素对应一个系列（如 YouTube、TikTok、Instagram）的数据

                        let tooltipContent = ''; // 初始化提示内容为空字符串

                        // 遍历 params 数组，处理每个系列的数据
                        params.forEach(param => {
                            const index = param.dataIndex; // 当前数据点的索引
                            const seriesName = param.seriesName; // 当前系列的名称（如 YouTube）
                            const value = param.value; // 当前系列在当前数据点的值

                            // 将系列名称和值添加到提示内容中
                            tooltipContent += `${seriesName}: ${value}<br/>`;
                        });

                        // 添加额外的提示信息，告诉用户可以点击数据点以访问视频
                        tooltipContent += '点击对应位置以访问视频';

                        // 返回最终的提示内容
                        return tooltipContent;
                    }
                },
                legend: {
                    data: ['YouTube互动', 'TikTok互动', 'Instagram互动'],
                    right: '10%',  // 从右侧的距离
                    top: '10%' 
                },
                xAxis: {
                        type: 'category',
                data: dates, // 使用处理后的日期数组
                axisLabel: {
                    rotate: 45, // 标签旋转
                    formatter: function (value) {
                        return value; // 可选：添加"日"后缀 (显示为15日)
                    }
            }
                },
                yAxis: {
                    type: 'value'
                },
                series: [
                    {
                        name: 'YouTube互动',
                        type: 'line',
                        data: youtubeEngagement,
                        emphasis: {
                            focus: 'series'
                        }
                    },
                    {
                        name: 'TikTok互动',
                        type: 'line',
                        data: tkEngagement,
                        emphasis: {
                            focus: 'series'
                        }
                    },
                    {
                        name: 'Instagram互动',
                        type: 'line',
                        data: insEngagement,
                        emphasis: {
                            focus: 'series'
                        }
                    }
                ]
            };

            engagementChart.setOption(option2);

            // 添加点击事件，直接跳转到视频
        engagementChart.on('click', function (params) {
        const index = params.dataIndex;
        let url = '';
        // 处理系列名称中的"互动"后缀
        const platform = params.seriesName.replace('互动', '');
        switch (platform) {
            case 'YouTube':
                url = youtubeUrls[index];
                break;
            case 'TikTok':
                url = tkUrls[index];
                break;
            case 'Instagram':
                url = insUrls[index];
                break;
        }
        if (url) {
            window.open(url, '_blank');
        }
    });
        }

        // 初始化渲染
        renderCharts(data);
    </script>
</body>
</html>